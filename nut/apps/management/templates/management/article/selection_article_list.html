{% extends 'management/management_base.html' %}
{% load i18n %}

{% block content %}
    <h1 class="page-header">精选文章</h1>



    <div class="table-responsive">
        <table class="table table-striped action-table">
            <thead>
                <tr>
                    <th class="id">#</th>
                    <th class="title">{% trans 'title' %}</th>
                    <th class="person-link" >{% trans 'author' %}</th>
                    <th class="cell-boolean" >文章状态</th>
                     <th>{% trans 'operation' %}</th>

                     <th class="date-time">入精选时间</th>
                    <th>该文章入精选次数</th>
                    <th>上次精选发布时间</th>

                    <th>精选操作</th>
                    <th>精选发布</th>
                </tr>
            </thead>
            <tbody>
                {% for sla in selection_article_list %}
                    <tr>
                        <td>{{ sla.pk }}</td>
                        <td>{{ sla.article.title }}</td>
                        <td>
                            <a href="{% url 'management_user_edit' sla.article.creator_id %}" target="_blank">
                            {{ sla.article.creator.profile.nickname }}
                            </a>
                        </td>
                        <td>{{ sla.article.get_publish_display }}</td>

                        <td>
                            <div class="btn-group">
                                <a class="btn btn-default" href="{% url 'management_article_edit' sla.article.pk %}">{% trans 'edit' %}</a>

                                <a class="btn btn-success" href="{% url 'management_article_preview' sla.article.pk %}">{% trans 'preview' %}</a>
                            </div>
                        </td>

                        <td>{{ sla.create_time|date:'Y-m-d H:i'}}</td>
                        <td>{{ sla.article.selection_count}}</td>
                        <td>{{ sla.article.last_selection_time }}</td>
                        <td>
                            <div class="btn-group">
                                <a class="btn btn-danger remove-selection"
                                    url = "{% url 'management_remove_selection_article' sla.pk %}"
                                    selection_article_id="{{  sla.pk }}">
                                    移除精选
                                </a>
                            </div>
                        </td>
                        <td>
                            <div class="btn-group">
                                <a class="btn btn-primary selection-publish">
                                    发布文章到前端精选流
                                </a>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% include "management/entities/paginator_new.html" with page_obj=page_obj url=request.path %}


{% endblock %}