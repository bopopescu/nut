{% extends 'base.html' %}

{% load survey_extras i18n static %}

{% block wrapper %}
{{ wizard.form.media }}
{% endblock %}

{% block body %}

    <div class="row">
        <div class="col-md-12">
            <img class="img-responsive" src="{% static '/media/img/header.jpg' %}">
            <h2>{{survey.name|title}}</h2>
            <div class="survey-description">
    	        {{survey.description|safe}}
            </div>
            <p>问卷完成程度 1/4 </p>
            <div class="progress">
              <div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 25%">
                <span class="sr-only">80% Complete (danger)</span>
              </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <form class="form-horizontal" action="" method="post">{% csrf_token %}

                {{ wizard.management_form }}
                <fieldset>
                {% if wizard.form.forms %}

                    {{ wizard.form.management_form }}
                        {% for form in wizard.form.forms %}
                            <div class="form-group">
                                {{ form }}
                            </div>
                        {% endfor %}
                {% else %}
                    {% for field in wizard.form %}
                        {% if field.field.widget.attrs.category != category %}
                        <div class="form-group {% if field.errors %}has-error{% endif %}">
                             <label class="control-label col-sm-2">{{ field.label_tag }}</label>
                             <div class="col-sm-5">
                                 {{ field }}
                             </div>
                            {% if field.errors %}
                                {% for error in field.errors %}
                                <span class="help-block">{{ error }}</span>
                                {% endfor %}
                            {% else %}
                                <span class="help-block">(如：{{ field.help_text }})</span>
                            {% endif %}
                        </div>
                        {% endif %}
                    {% endfor %}
                    <hr />
                    <h5 style="font-size:24px;font-weight:600;">{{ category }}</h5>
                    <ol>
                    {% for field in wizard.form %}

                        {% if field.field.widget.attrs.category == category %}

                        <li>
                            <div class="form-group {% if field.errors %}has-error{% endif %}">
                                <label>{{ forloop.counter}}. {{ field.label }}</label>
                            {% if field.field.widget|klass == 'RadioSelect' %}
                                <div class="radio">
                                    {{ field }}
                                </div>
                            {% elif field.field.widget|klass == 'CheckboxSelectMultiple' %}
                                <div class="checkbox">
                                    {% for radio in field %}
                                        <label class="checkbox-inline">
                                            {{ radio.tag }}
                                            {{ radio.choice_label }}
                                        </label>
                                    {% endfor %}
                                </div>
                            {% elif field.field.widget|klass == 'Select' %}
                                <div class="col-sm-12">
                                    {{ field }}
                                </div>
                            {% else %}
    						    <div>
                                    {{ field }}
    						    </div>
    						{% endif %}

                            </div>
                        </li>
                        {% endif %}
                    {% endfor %}
                    </ol>
                {% endif %}
                </fieldset>

                {% if wizard.steps.prev %}

                {% else %}
                    <button type="submit" class="btn btn-primary btn-lg" style="border:none;border-radius:0px;background-color:#343434;color:#fff;">下一步</button>
                {% endif %}
            </form>
        </div>
    </div>
{% endblock %}